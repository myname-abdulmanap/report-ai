<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProtectQube AI Reports Analytics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="styles.css">
    <style>

      .export-options {
  margin-bottom: 10px;
  padding: 10px;
  background-color: #f9f9f9;
  border: 1px solid #ddd;
  border-radius: 6px;
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  font-size: 14px;
}
.export-options label {
  display: flex;
  align-items: center;
  gap: 5px;
}

      .top-detections-table {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 20px;
}

.top-detections-table h3 {
    margin-top: 0;
    margin-bottom: 15px;
    color: #333;
    font-size: 18px;
    font-weight: 600;
}

.detection-table-container {
    overflow-x: auto;
}

.detection-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}

.detection-table th {
    background-color: #f5f7f9;
    color: #5a6474;
    text-align: left;
    padding: 12px 15px;
    border-bottom: 1px solid #e2e8f0;
    font-weight: 600;
}

.detection-table td {
    padding: 12px 15px;
    border-bottom: 1px solid #e2e8f0;
    color: #333;
}

.detection-table tbody tr:hover {
    background-color: #f8fafc;
}

.detection-value {
    font-weight: 600;
    color: #2563eb;
}

.pagination {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 20px;
    flex-wrap: wrap;
}

.pagination-btn {
    background-color: #fff;
    border: 1px solid #d1d5db;
    color: #4b5563;
    padding: 8px 12px;
    margin: 0 4px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}

.pagination-btn.active {
    background-color: #2563eb;
    color: white;
    border-color: #2563eb;
}

.pagination-btn:hover:not(.active) {
    background-color: #f3f4f6;
}

.pagination-ellipsis {
    margin: 0 4px;
    color: #4b5563;
}

.pagination-info {
    margin-left: 15px;
    color: #6b7280;
    font-size: 14px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .detection-table {
        font-size: 13px;
    }
    
    .detection-table th, 
    .detection-table td {
        padding: 10px 12px;
    }
    
    .pagination {
        flex-direction: column;
        align-items: center;
    }
    
    .pagination-info {
        margin-left: 0;
        margin-top: 10px;
    }
}
      /* Original stat-card CSS */
.stat-card {
    background-color: var(--primary); /* Changed from white to primary color */
    border-radius: 10px;
    padding: 30px; /* Increased padding from 20px to 30px */
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
    color: white; /* Added white text color */
    height: 180px; /* Added fixed height to make cards larger */
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
}

/* Removed the border-left properties since we're using full background colors */

/* Updated each card type to have its respective full background color */
.stat-card.primary {
    background-color: var(--primary);
}

.stat-card.success {
    background-color: var(--success);
}

.stat-card.warning {
    background-color: var(--warning);
}

.stat-card.danger {
    background-color: var(--danger);
}

/* Text color adjustments */
.stat-card .stat-info h2 {
    font-size: 28px;
    font-weight: bold;
    margin-bottom: 5px;
    color: white;
}

.stat-card .stat-info p {
    font-size: 14px;
    color: rgba(255, 255, 255, 0.8); /* Changed from dark gray to translucent white */
    margin-bottom: 8px;
}

/* Updated icon styles */
.stat-card .stat-icon {
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.2); /* Semi-transparent white background */
    color: white; /* Icon color now white */
}

/* No need for individual icon background colors since we're using a consistent approach */
.stat-card.primary .stat-icon,
.stat-card.success .stat-icon,
.stat-card.warning .stat-icon,
.stat-card.danger .stat-icon {
    background-color: rgba(255, 255, 255, 0.2);
    color: white;
}

/* Adjusted trend colors for better visibility on colored backgrounds */
.stat-trend {
    font-size: 13px;
    display: flex;
    align-items: center;
    gap: 5px;
    color: white; /* Default to white */
}

.stat-trend.positive {
    color: rgba(255, 255, 255, 0.9); /* Slightly more opaque */
}

.stat-trend.negative {
    color: rgba(255, 255, 255, 0.9); /* Slightly more opaque */
}

/* Optional: Add icons to trends to indicate up/down instead of relying on color alone */
.stat-trend.positive::before {
    content: "↑"; /* Up arrow */
    margin-right: 2px;
}

.stat-trend.negative::before {
    content: "↓"; /* Down arrow */
    margin-right: 2px;
}


   * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: #f5f5f5;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }
    
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    h2 {
      color: #2c3e50;
      margin-bottom: 10px;
    }
    
    .search-bar {
      display: flex;
      gap: 10px;
      width: 100%;
      max-width: 600px;
    }
    
    .search-bar input {
      flex-grow: 1;
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }
    
    .search-bar button, .btn-export {
      padding: 10px 15px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .search-bar button:hover, .btn-export:hover {
      background-color: #2980b9;
    }
    
    .btn-export {
      background-color: #27ae60;
    }
    
    .btn-export:hover {
      background-color: #219653;
    }
    
    .top-detections-table {
      width: 100%;
      overflow-x: auto;
    }
    
    .detection-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    
    .detection-table th, .detection-table td {
      padding: 12px 15px;
      text-align: center;
      border-bottom: 1px solid #ddd;
    }
    
    .detection-table th {
      background-color: #f1f1f1;
      color: #333;
      font-weight: 600;
    }
    
    .detection-table tr:hover {
      background-color: #f9f9f9;
    }
    
    .alert {
      background-color: #e74c3c;
      color: white;
      padding: 3px 8px;
      border-radius: 3px;
      font-weight: bold;
    }
    
    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 20px;
      gap: 5px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .pagination-btn {
      padding: 8px 12px;
      border: 1px solid #ddd;
      background-color: white;
      cursor: pointer;
      border-radius: 4px;
    }
    
    .pagination-btn.active {
      background-color: #3498db;
      color: white;
      border-color: #3498db;
    }
    
    .pagination-ellipsis {
      padding: 8px 5px;
    }
    
    .pagination-info {
      margin-left: auto;
      font-size: 14px;
      color: #666;
    }
    
    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .search-bar {
        width: 100%;
      }
      
      .detection-table-container {
        overflow-x: auto;
      }
    }
    
    .table-loading {
      text-align: center;
      padding: 20px;
      font-style: italic;
      color: #666;
    }
    
    .no-results {
      text-align: center;
      padding: 20px;
      color: #666;
    }

    .dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-menu {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 160px;
  border: 1px solid #ccc;
  z-index: 1;
  box-shadow: 0 8px 16px rgba(0,0,0,0.2);
}

.dropdown-menu a {
  color: black;
  padding: 10px 15px;
  text-decoration: none;
  display: block;
}

.dropdown-menu a:hover {
  background-color: #f1f1f1;
}

    </style>
</head>
<body>
  

    <div class="container">
        <div class="header">
            <h1>Report Analytics</h1>
            <div class="actions">
                <!-- <button id="download-reports">
                    <i class="fas fa-download"></i> Download Reports
                </button>
               -->
                <select id="location-select">
                    <option>Total ATM Locations (500)</option>
                    <!-- <option>MRT Stations (45)</option>
                    <option>Shopping Malls (125)</option>
                    <option>Bank Branches (180)</option>
                    <option>Public Areas (150)</option> -->
                </select>
                <select id="date-select">
                    <option>Today</option>
                    <option>Yesterday</option>
                    <option>Last Week</option>
                    <option>Last Month</option>
                    <option>Custom Date</option>
                </select>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card primary">
                <div class="stat-info">
                    <h2>487</h2>
                    <p>Helm Detection</p>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i> +21.5% from last week
                    </div>
                </div>
                <div class="stat-icon">
                    <i class="fas fa-hard-hat"></i>
                </div>
            </div>
            <div class="stat-card success">
                <div class="stat-info">
                    <h2>1,250</h2>
                    <p>Receipts (Struk) Detected</p>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i> +8.3% from last week
                    </div>
                </div>
                <div class="stat-icon">
                    <i class="fas fa-receipt"></i>
                </div>
            </div>
            <div class="stat-card warning">
                <div class="stat-info">
                    <h2>652s</h2>
                    <p>Average Dwell Time</p>
                    <div class="stat-trend negative">
                        <i class="fas fa-arrow-down"></i> -5.2% from last week
                    </div>
                </div>
                <div class="stat-icon">
                    <i class="fas fa-clock"></i>
                </div>
            </div>
            <div class="stat-card danger">
                <div class="stat-info">
                    <h2>56</h2>
                    <p>2 Person Alerts</p>
                    <div class="stat-trend negative">
                        <i class="fas fa-arrow-up"></i> +12.0% from last week
                    </div>
                </div>
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
            </div>
        </div>

        <div class="charts-row">
<div class="chart-card">
                <div class="chart-header">
                    <h3>AI ATM Summary</h3>
                </div>
                <div class="pie-chart-container">
                    <canvas id="locations-chart"></canvas>
                </div>
            </div>
               <div class="alert-log">
              <div class="alert-header">
                  <h3>
                      <i class="fas fa-exclamation-triangle"></i> 
                      Real-time Alert Log
                      <span class="alert-count">5</span>
                  </h3>
                  <div class="alert-filter">
                      <button class="active">Today</button>
                    
                  </div>
              </div>
              <div class="real-time-feed">
                  <div class="alert-item">
                      <div class="alert-icon">
                          <i class="fas fa-hard-hat"></i>
                      </div>
                      <div class="alert-content">
                          <div class="alert-title">Helm Detection</div>
                          <div class="alert-details">
                              <span><i class="fas fa-map-marker-alt"></i> MRT Blok M - ATM #152</span>
                            
                          </div>
                      </div>
                      <div class="alert-time">3 hours ago</div>
                  </div>
                  <div class="alert-item">
                      <div class="alert-icon">
                          <i class="fas fa-users"></i>
                      </div>
                      <div class="alert-content">
                          <div class="alert-title">2 Person Alert</div>
                          <div class="alert-details">
                              <span><i class="fas fa-map-marker-alt"></i> BSI Grand Indonesia - ATM #156</span>
                            
                          </div>
                      </div>
                      <div class="alert-time">3 hours ago</div>
                  </div>
                  <div class="alert-item">
                      <div class="alert-icon">
                          <i class="fas fa-users"></i>
                      </div>
                      <div class="alert-content">
                          <div class="alert-title">2 Person Alert</div>
                          <div class="alert-details">
                              <span><i class="fas fa-map-marker-alt"></i> BSI Grand Indonesia - ATM #156</span>
                            
                          </div>
                      </div>
                      <div class="alert-time">3 hours ago</div>
                  </div>
                  <div class="alert-item">
                      <div class="alert-icon">
                          <i class="fas fa-hard-hat"></i>
                      </div>
                      <div class="alert-content">
                          <div class="alert-title">Helm Detection</div>
                          <div class="alert-details">
                              <span><i class="fas fa-map-marker-alt"></i> ST. Bogor - ATM #154</span>
                            
                          </div>
                      </div>
                      <div class="alert-time">3 hours ago</div>
                  </div>
                  <div class="alert-item">
                      <div class="alert-icon">
                          <i class="fas fa-hard-hat"></i>
                      </div>
                      <div class="alert-content">
                          <div class="alert-title">Helm Detection</div>
                          <div class="alert-details">
                              <span><i class="fas fa-map-marker-alt"></i> ST. Tambun - ATM #151</span>
                            
                          </div>
                      </div>
                      <div class="alert-time">3 hours ago</div>
                  </div>
                  
              </div>
          </div>
            <div class="chart-card">
                <div class="chart-header">
                    <h3>Top 6 Location People Counting Trend</h3>
                    <!-- <div class="chart-tabs">
                        <div class="chart-tab active">Daily</div>
                        <div class="chart-tab">Weekly</div>
                        <div class="chart-tab">Monthly</div>
                    </div> -->
                </div>
                <div class="chart-container">
                    <canvas id="people-counting-chart"></canvas>
                </div>
            </div>
              <div class="pie-chart-card">
          <h3>All Fascia Status</h3>
          <div class="pie-chart-container">
              <canvas id="fascia-chart"></canvas>
          </div>
          <div class="fascia-status">
              <div class="fascia-item">
                  <div class="fascia-name">
                      <i class="fas fa-arrow-up"></i> Upper Fascia
                  </div>
                  <div class="fascia-value">
                      <span class="fascia-status-item status-open">
                          <i class="fas fa-door-open"></i> Open (78)
                      </span>
                      <span class="fascia-status-item status-closed">
                          <i class="fas fa-door-closed"></i> Closed (422)
                      </span>
                  </div>
              </div>
              <div class="fascia-item">
                  <div class="fascia-name">
                      <i class="fas fa-arrow-down"></i> Lower Fascia
                  </div>
                  <div class="fascia-value">
                      <span class="fascia-status-item status-open">
                          <i class="fas fa-door-open"></i> Open (47)
                      </span>
                      <span class="fascia-status-item status-closed">
                          <i class="fas fa-door-closed"></i> Closed (453)
                      </span>
                  </div>
              </div>
          </div>
      </div>

        <div class="pie-chart-card">
          <h3>Multiple Person Alerts</h3>
          <div class="pie-chart-container">
              <canvas id="alerts-chart"></canvas>
          </div>
      </div>

            <div class="pie-chart-card">
          <h3>Top 6 Helm Detection</h3>
          <div class="pie-chart-container">
              <canvas id="helm-chart"></canvas>
          </div>




          
      </div>
            
        </div>

      
    
    <div class="top-detections-table">
      <div class="header">
  <h2>All ATM Detection</h2>
  <div class="search-bar">
    <input 
      type="text" 
      id="searchInput" 
      placeholder="Search by ATM name or detection values..."
      onkeyup="if(event.key === 'Enter') searchTable()"
    >
    <button onclick="searchTable()">
      <i class="fas fa-search"></i> Search
    </button>

    <div class="dropdown">
      <button class="btn-export dropdown-toggle" onclick="toggleDropdown()">
        <i class="fas fa-file-export"></i> Export
      </button>
      <div id="dropdownMenu" class="dropdown-menu">
        <a href="#" onclick="exportToExcel()">Export to Excel</a>
        <a href="#" onclick="exportToPDF()">Export to PDF</a>
        <a href="#" onclick="exportToCSV()">Export to CSV</a>
      </div>
    </div>
  </div>
</div>
  
   

      <div class="detection-table-container">
        
        <table class="detection-table" id="atmTable">
     <thead>
  <tr>
    <th><input type="checkbox" id="selectAll" onclick="toggleSelectAll(this)"></th>
    <th onclick="sortTable(0)">ATM <i class="fas fa-sort"></i></th>
    <th onclick="sortTable(1)">Helm <i class="fas fa-sort"></i></th>
    <th onclick="sortTable(2)">Struk <i class="fas fa-sort"></i></th>
    <th onclick="sortTable(3)">Trashbin <i class="fas fa-sort"></i></th>
    <th onclick="sortTable(4)">Dwell Time <i class="fas fa-sort"></i></th>
    <th onclick="sortTable(5)">People Counting <i class="fas fa-sort"></i></th>
    <th onclick="sortTable(6)">2 Person <i class="fas fa-sort"></i></th>
    <th onclick="sortTable(7)">Fascia <i class="fas fa-sort"></i></th>
  </tr>
</thead>

          <tbody id="tableBody">
            <!-- Table data will be populated via JavaScript -->
          </tbody>
        </table>
      </div>
      
      <div class="pagination" id="pagination">
        <!-- Pagination will be generated via JavaScript -->
      </div>
    </div>
  </div>

 
  
  
    
    
  </div>
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script>
        // People Counting Chart
        const peopleCountingCtx = document.getElementById('people-counting-chart').getContext('2d');
        const peopleCountingChart = new Chart(peopleCountingCtx, {
            type: 'line',
            data: {
                labels: ['ST. Bogor', 'ST. Tambun', 'ST. Bekasi', 'BLOK M', 'BSI Margonda', 'BSI Cilamaya'],
                datasets: [{
                    label: 'Total People',
                    toplocation: 'ATM Locations',
                    data: [1250, 1380, 1210, 1540, 1820, 2100],
                    borderColor: '#4361ee',
                    backgroundColor: 'rgba(67, 97, 238, 0.1)',
                    tension: 0.4,
                    fill: true,
                    pointBackgroundColor: '#4361ee',
                    pointRadius: 4,
                    pointHoverRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            drawBorder: false,
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        ticks: {
                            font: {
                                size: 12
                            }
                        }
                    },
                    x: {
                        grid: {
                            drawBorder: false,
                            display: false
                        },
                        ticks: {
                            font: {
                                size: 12
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: '#2b2d42',
                        titleFont: {
                            size: 14
                        },
                        bodyFont: {
                            size: 13
                        },
                        padding: 12,
                        displayColors: false,
                        callbacks: {
                            label: function(context) {
                                return `Total People: ${context.raw}`;
                            },

                        }
                    }
                }
            }
        });

        // Locations Distribution Chart
        const locationsCtx = document.getElementById('locations-chart').getContext('2d');
        const locationsChart = new Chart(locationsCtx, {
            type: 'doughnut',
            data: {
                labels: ['Helm Detection', 'People Counting', 'Dwell Time', 'Struk', 'Trashbin', '2 People', 'Fascia Detection' ],
                datasets: [{
                    data: [487, 450, 652 ,1250, 150, 120, 100],
                    backgroundColor: [
                        '#4361ee',
                        '#4cc9f0',
                        '#0bb534',
                        '#f9c74f'
                    ],
                    borderWidth: 0,
                    hoverOffset: 5
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '65%',
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            font: {
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: '#2b2d42',
                        titleFont: {
                            size: 14
                        },
                        bodyFont: {
                            size: 13
                        },
                        padding: 12,
                        callbacks: {
                            label: function(context) {
                                return `${context.label}: ${context.raw}`;
                            }
                        }
                    }
                }
            }
        });

        // Helm Detection Chart
        const helmCtx = document.getElementById('helm-chart').getContext('2d');
        const helmChart = new Chart(helmCtx, {
            type: 'pie',
            data: {
                labels: ['ST. Bogor', 'ST. Tambun', 'BSI Margonda', 'BSI Cibubur', 'BSI Indomaret Cikarang'],
                datasets: [{
                    data: [356, 87, 44, 23, 12],
                    backgroundColor: [
                        '#0bb534',
                        '#f9c74f',
                        '#ef233c',
                        '#4cc9f0',
                        '#4361ee'
                    ],
                    borderWidth: 0,
                    hoverOffset: 5
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            font: {
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: '#2b2d42',
                        titleFont: {
                            size: 14
                        },
                        bodyFont: {
                            size: 13
                        },
                        padding: 12
                    }
                }
            }
        });

        // Fascia Status Chart
        const fasciaCtx = document.getElementById('fascia-chart').getContext('2d');
        const fasciaChart = new Chart(fasciaCtx, {
            type: 'pie',
            data: {
                labels: ['Upper Fascia Open', 'Lower Fascia Open', 'Both Closed'],
                datasets: [{
                    data: [78, 47, 375],
                    backgroundColor: [
                        '#f9c74f',
                        '#ef233c',
                        '#0bb534'
                    ],
                    borderWidth: 0,
                    hoverOffset: 5
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            font: {
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: '#2b2d42',
                        titleFont: {
                            size: 14
                        },
                        bodyFont: {
                            size: 13
                        },
                        padding: 12
                    }
                }
            }
        });

        // Multiple Person Alerts Chart
        const alertsCtx = document.getElementById('alerts-chart').getContext('2d');
        const alertsChart = new Chart(alertsCtx, {
            type: 'pie',
            data: {
                labels: ['2 People', '3+ People'],
                datasets: [{
                    data: [38, 12],
                    backgroundColor: [
                        '#f9c74f',
                        '#ef233c',
                        '#4cc9f0'
                    ],
                    borderWidth: 0,
                    hoverOffset: 5
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            font: {
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: '#2b2d42',
                        titleFont: {
                            size: 14
                        },
                        bodyFont: {
                            size: 13
                        },
                        padding: 12
                    }
                }
            }
        });

        // Activity Trend Chart
        const activityCtx = document.getElementById('activity-trend-chart').getContext('2d');
        const activityChart = new Chart(activityCtx, {
            type: 'line',
            data: {
                labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
                datasets: [{
                    label: 'Helm Detections',
                    data: [42, 58, 65, 72, 80, 95, 75],
                    borderColor: '#4361ee',
                    backgroundColor: 'rgba(67, 97, 238, 0.1)',
                    tension: 0.4,
                    fill: true,
                    pointBackgroundColor: '#4361ee',
                    pointRadius: 4,
                    pointHoverRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            drawBorder: false,
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        ticks: {
                            font: {
                                size: 12
                            }
                        }
                    },
                    x: {
                        grid: {
                            drawBorder: false,
                            display: false
                        },
                        ticks: {
                            font: {
                                size: 12
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: '#2b2d42',
                        titleFont: {
                            size: 14
                        },
                        bodyFont: {
                            size: 13
                        },
                        padding: 12,
                        displayColors: false
                    }
                }
            }
        });

        // Tab functionality for activity trend chart
        document.querySelectorAll('.chart-tabs .chart-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active class from all tabs
                document.querySelectorAll('.chart-tabs .chart-tab').forEach(t => {
                    t.classList.remove('active');
                });
                
                // Add active class to clicked tab
                this.classList.add('active');
                
                // Update chart data based on selected tab
                const tabText = this.textContent.trim();
                
                if (tabText === 'Helm Detection') {
                    activityChart.data.datasets[0].label = 'Helm Detections';
                    activityChart.data.datasets[0].data = [42, 58, 65, 72, 80, 95, 75];
                    activityChart.data.datasets[0].borderColor = '#4361ee';
                    activityChart.data.datasets[0].backgroundColor = 'rgba(67, 97, 238, 0.1)';
                } else if (tabText === 'Receipts') {
                    activityChart.data.datasets[0].label = 'Receipt Detections';
                    activityChart.data.datasets[0].data = [132, 158, 175, 190, 210, 245, 150];
                    activityChart.data.datasets[0].borderColor = '#0bb534';
                    activityChart.data.datasets[0].backgroundColor = 'rgba(11, 181, 52, 0.1)';
                } else if (tabText === 'Dwell Time') {
                    activityChart.data.datasets[0].label = 'Avg Dwell Time (s)';
                    activityChart.data.datasets[0].data = [620, 645, 680, 635, 590, 710, 690];
                    activityChart.data.datasets[0].borderColor = '#f9c74f';
                    activityChart.data.datasets[0].backgroundColor = 'rgba(249, 199, 79, 0.1)';
                } else if (tabText === 'Multiple Person') {
                    activityChart.data.datasets[0].label = 'Multiple Person Alerts';
                    activityChart.data.datasets[0].data = [5, 8, 10, 12, 9, 7, 5];
                    activityChart.data.datasets[0].borderColor = '#ef233c';
                    activityChart.data.datasets[0].backgroundColor = 'rgba(239, 35, 60, 0.1)';
                }
                
                activityChart.update();
            });
        });

        // Toggle for People Counting Chart tabs
        document.querySelectorAll('.chart-tabs .chart-tab').forEach(tab => {
            if (tab.parentElement.previousElementSibling.textContent.includes('People Counting')) {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    this.parentElement.querySelectorAll('.chart-tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // You would update the chart data here based on the selected tab
                    // For now, we'll just demonstrate the UI change
                });
            }
        });

        // Alert Filter functionality
        document.querySelectorAll('.alert-filter button').forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons
                document.querySelectorAll('.alert-filter button').forEach(b => {
                    b.classList.remove('active');
                });
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // You would filter the alerts here based on the selected filter
            });
        });

        // Add animation to alert count
        const alertCount = document.querySelector('.alert-count');
        setInterval(() => {
            alertCount.style.transform = 'scale(1.2)';
            setTimeout(() => {
                alertCount.style.transform = 'scale(1)';
            }, 300);
        }, 3000);

        // Add interactivity to the stat cards
        document.querySelectorAll('.stat-card').forEach(card => {
            card.addEventListener('click', function() {
                // You could show more detailed information when a card is clicked
                console.log('Card clicked:', this.querySelector('p').textContent);
            });
        });

        // Add interactivity to detection items
        document.querySelectorAll('.detection-item').forEach(item => {
            item.addEventListener('click', function() {
                // You could show more detailed information when an item is clicked
                console.log('Detection clicked:', this.querySelector('.detection-title').textContent);
            });
        });

        // Add download functionality
        document.getElementById('download-reports').addEventListener('click', function() {
            alert('Preparing download for current analytics reports...');
            // Implementation for actual download would go here
        });

        // Add filter change functionality
        document.getElementById('region-select').addEventListener('change', function() {
            updateDashboard();
        });
        
        document.getElementById('location-select').addEventListener('change', function() {
            updateDashboard();
        });
        
        document.getElementById('date-select').addEventListener('change', function() {
            updateDashboard();
        });
        
        function updateDashboard() {
            const region = document.getElementById('region-select').value;
            const location = document.getElementById('location-select').value;
            const date = document.getElementById('date-select').value;
            
            console.log(`Filters updated: ${region}, ${location}, ${date}`);
            // You would update all charts and data based on the new filters
            
            // For demonstration, let's simulate a loading state
            document.querySelectorAll('.chart-container').forEach(container => {
                container.style.opacity = '0.5';
            });
            
            setTimeout(() => {
                document.querySelectorAll('.chart-container').forEach(container => {
                    container.style.opacity = '1';
                });
                // Show a toast notification or some indication that data was refreshed
            }, 800);
        }
        document.addEventListener('DOMContentLoaded', function() {
    // Pagination functionality could be implemented here
    const paginationButtons = document.querySelectorAll('.pagination-btn');
    
    paginationButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Remove active class from all buttons
            paginationButtons.forEach(btn => btn.classList.remove('active'));
            
            // Add active class to clicked button
            this.classList.add('active');
            
            // In a real implementation, this would trigger loading of different data
            // For this demo, we'll just update the info text
            const pageNumber = this.textContent;
            const startItem = (pageNumber - 1) * 10 + 1;
            const endItem = Math.min(pageNumber * 10, 500);
            
            document.querySelector('.pagination-info').textContent = 
                `Showing ${startItem}-${endItem} of 500 ATMs`;
        });
    });
});
    </script>

 <script>
    // Sample data (in a real application, this would come from a server)
    const atmData = [
      {
        atm: "ATM St. Bogor",
        helm: 12,
        struk: 34,
        trashbin: 4,
        dwellTime: "210s",
        peopleCounting: 10,
        multiplePerson: 2,
        fasciaAtas: 20,
        fasciaBawah: 20
      },
      {
        atm: "ATM BSI Margonda",
        helm: 6,
        struk: 15,
        trashbin: 2,
        dwellTime: "150s",
        peopleCounting: 30,
        multiplePerson: 2,
        fasciaAtas: 20,
        fasciaBawah: 15
      },
      {
        atm: "ATM BSI Sudirman",
        helm: 6,
        struk: 15,
        trashbin: 2,
        dwellTime: "150s",
        peopleCounting: 12,
        multiplePerson: 3,
        fasciaAtas: 20,
        fasciaBawah: 15
      },
      {
        atm: "ATM St. MRT",
        helm: 6,
        struk: 15,
        trashbin: 2,
        dwellTime: "150s",
        peopleCounting: 13,
        multiplePerson: 3,
        fasciaAtas: 20,
        fasciaBawah: 15
      },
      {
        atm: "ATM Mall Kartini",
        helm: 8,
        struk: 22,
        trashbin: 5,
        dwellTime: "180s",
        peopleCounting: 25,
        multiplePerson: 1,
        fasciaAtas: 18,
        fasciaBawah: 22
      },
      {
        atm: "ATM Wisma BNI",
        helm: 15,
        struk: 40,
        trashbin: 6,
        dwellTime: "120s",
        peopleCounting: 15,
        multiplePerson: 4,
        fasciaAtas: 25,
        fasciaBawah: 18
      },
      {
        atm: "ATM Plaza Senayan",
        helm: 9,
        struk: 28,
        trashbin: 3,
        dwellTime: "200s",
        peopleCounting: 18,
        multiplePerson: 2,
        fasciaAtas: 15,
        fasciaBawah: 12
      },
      {
        atm: "ATM Grand Indonesia",
        helm: 11,
        struk: 32,
        trashbin: 7,
        dwellTime: "160s",
        peopleCounting: 22,
        multiplePerson: 5,
        fasciaAtas: 16,
        fasciaBawah: 17
      },
      {
        atm: "ATM Central Park",
        helm: 10,
        struk: 25,
        trashbin: 4,
        dwellTime: "190s",
        peopleCounting: 20,
        multiplePerson: 2,
        fasciaAtas: 22,
        fasciaBawah: 19
      },
      {
        atm: "ATM Kota Kasablanka",
        helm: 7,
        struk: 18,
        trashbin: 3,
        dwellTime: "175s",
        peopleCounting: 16,
        multiplePerson: 1,
        fasciaAtas: 14,
        fasciaBawah: 13
      },
      {
        atm: "ATM Gandaria City",
        helm: 14,
        struk: 38,
        trashbin: 5,
        dwellTime: "140s",
        peopleCounting: 28,
        multiplePerson: 3,
        fasciaAtas: 19,
        fasciaBawah: 21
      },
      {
        atm: "ATM Pondok Indah Mall",
        helm: 13,
        struk: 30,
        trashbin: 6,
        dwellTime: "165s",
        peopleCounting: 24,
        multiplePerson: 2,
        fasciaAtas: 17,
        fasciaBawah: 16
      }
    ];

    // For demonstration, create more dummy data
    for (let i = 0; i < 38; i++) {
      const randomIndex = Math.floor(Math.random() * atmData.length);
      const baseName = atmData[randomIndex].atm;
      
      atmData.push({
        atm: `${baseName} ${i+1}`,
        helm: Math.floor(Math.random() * 20) + 1,
        struk: Math.floor(Math.random() * 45) + 5,
        trashbin: Math.floor(Math.random() * 10) + 1,
        dwellTime: `${Math.floor(Math.random() * 200) + 100}s`,
        peopleCounting: Math.floor(Math.random() * 35) + 5,
        multiplePerson: Math.floor(Math.random() * 6),
        fasciaAtas: Math.floor(Math.random() * 25) + 10,
        fasciaBawah: Math.floor(Math.random() * 22) + 10
      });
    }

    // Setup
    let currentPage = 1;
    const rowsPerPage = 10;
    let filteredData = [...atmData];
    let sortDirection = 1; // 1 for ascending, -1 for descending
    let sortColumn = 0; // Default sort column index

    // Initial render
    renderTable();
    renderPagination();

    // Function to render the table
    function renderTable() {
  const tableBody = document.getElementById('tableBody');
  tableBody.innerHTML = '';
  
  const start = (currentPage - 1) * rowsPerPage;
  const end = Math.min(start + rowsPerPage, filteredData.length);
  
  if (filteredData.length === 0) {
    tableBody.innerHTML = `
      <tr>
        <td colspan="9" class="no-results">No results found</td>
      </tr>
    `;
    return;
  }
  
  for (let i = start; i < end; i++) {
    const item = filteredData[i];
    const row = document.createElement('tr');
    
    row.innerHTML = `
      <td><input type="checkbox" class="row-checkbox" data-atm="${item.atm}"></td>
      <td>${item.atm}</td>
      <td>${item.helm}</td>
      <td>${item.struk}</td>
      <td>${item.trashbin}</td>
      <td>${item.dwellTime}</td>
      <td>${item.peopleCounting}</td>
      <td>${item.multiplePerson > 0 ? `<span class="alert">${item.multiplePerson}</span>` : '0'}</td>
      <td>Open: ${item.fasciaAtas}<br />Closed: ${item.fasciaBawah}</td>
    `;
    
    tableBody.appendChild(row);
  }
}

    // Function to render pagination
    function renderPagination() {
      const pagination = document.getElementById('pagination');
      pagination.innerHTML = '';
      
      const totalPages = Math.ceil(filteredData.length / rowsPerPage);
      
      // Create pagination buttons
      if (totalPages > 1) {
        // First page button
        const firstBtn = document.createElement('button');
        firstBtn.className = `pagination-btn${currentPage === 1 ? ' active' : ''}`;
        firstBtn.textContent = '1';
        firstBtn.onclick = () => goToPage(1);
        pagination.appendChild(firstBtn);
        
        // Show ellipsis for many pages
        if (currentPage > 3) {
          const ellipsis = document.createElement('span');
          ellipsis.className = 'pagination-ellipsis';
          ellipsis.textContent = '...';
          pagination.appendChild(ellipsis);
        }
        
        // Show surrounding pages
        for (let i = Math.max(2, currentPage - 1); i <= Math.min(totalPages - 1, currentPage + 1); i++) {
          if (i === 1 || i === totalPages) continue; // Skip first and last as they're added separately
          
          const btn = document.createElement('button');
          btn.className = `pagination-btn${currentPage === i ? ' active' : ''}`;
          btn.textContent = i;
          btn.onclick = () => goToPage(i);
          pagination.appendChild(btn);
        }
        
        // Show ellipsis for many pages
        if (currentPage < totalPages - 2) {
          const ellipsis = document.createElement('span');
          ellipsis.className = 'pagination-ellipsis';
          ellipsis.textContent = '...';
          pagination.appendChild(ellipsis);
        }
        
        // Last page button (if more than one page)
        if (totalPages > 1) {
          const lastBtn = document.createElement('button');
          lastBtn.className = `pagination-btn${currentPage === totalPages ? ' active' : ''}`;
          lastBtn.textContent = totalPages;
          lastBtn.onclick = () => goToPage(totalPages);
          pagination.appendChild(lastBtn);
        }
      }
      
      // Page info
      const pageInfo = document.createElement('div');
      pageInfo.className = 'pagination-info';
      const start = Math.min((currentPage - 1) * rowsPerPage + 1, filteredData.length);
      const end = Math.min(currentPage * rowsPerPage, filteredData.length);
      pageInfo.textContent = `Showing ${start}–${end} of 500 ATMs`;
      pagination.appendChild(pageInfo);
    }

    // Function to change page
    function goToPage(page) {
      currentPage = page;
      renderTable();
      renderPagination();
    }

    // Function to search the table
    function searchTable() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      
      if (searchTerm === '') {
        filteredData = [...atmData];
      } else {
        filteredData = atmData.filter(item => {
          return (
            item.atm.toLowerCase().includes(searchTerm) ||
            item.helm.toString().includes(searchTerm) ||
            item.struk.toString().includes(searchTerm) ||
            item.trashbin.toString().includes(searchTerm) ||
            item.dwellTime.toLowerCase().includes(searchTerm) ||
            item.peopleCounting.toString().includes(searchTerm) ||
            item.multiplePerson.toString().includes(searchTerm) ||
            item.fasciaAtas.toString().includes(searchTerm) ||
            item.fasciaBawah.toString().includes(searchTerm)
          );
        });
      }
      
      // Reset to first page after search
      currentPage = 1;
      renderTable();
      renderPagination();
    }

    // Function to sort table
    function sortTable(columnIndex) {
      // If same column, toggle direction
      if (sortColumn === columnIndex) {
        sortDirection *= -1;
      } else {
        sortColumn = columnIndex;
        sortDirection = 1;
      }
      
      filteredData.sort((a, b) => {
        const keys = ['atm', 'helm', 'struk', 'trashbin', 'dwellTime', 'peopleCounting', 'multiplePerson', 'fasciaAtas'];
        const key = keys[columnIndex];
        
        // Special case for dwell time (remove 's' and compare as numbers)
        if (key === 'dwellTime') {
          const aValue = parseInt(a[key].replace('s', ''));
          const bValue = parseInt(b[key].replace('s', ''));
          return sortDirection * (aValue - bValue);
        }
        
        // Special case for fascia (using fasciaAtas for sorting)
        if (columnIndex === 7) {
          return sortDirection * (a.fasciaAtas - b.fasciaAtas);
        }
        
        // For string values
        if (typeof a[key] === 'string') {
          return sortDirection * a[key].localeCompare(b[key]);
        }
        
        // For numeric values
        return sortDirection * (a[key] - b[key]);
      });
      
      renderTable();
    }

    // Function to export to Excel
    function exportToExcel() {
      // Create a worksheet
      const ws = XLSX.utils.json_to_sheet(
        filteredData.map(item => ({
          'ATM': item.atm,
          'Helm': item.helm,
          'Struk': item.struk,
          'Trashbin': item.trashbin,
          'Dwell Time': item.dwellTime,
          'People Counting': item.peopleCounting,
          'Multiple Person': item.multiplePerson,
          'Fascia Atas': item.fasciaAtas,
          'Fascia Bawah': item.fasciaBawah
        }))
      );
      
      // Create a workbook
      const wb = XLSX.utils.book_new();
      XLSX.utils.book_append_sheet(wb, ws, 'ATM Detection');
      
      // Generate Excel file
      const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });
      
      // Save file
      const today = new Date();
      const dateStr = `${today.getFullYear()}-${(today.getMonth()+1).toString().padStart(2, '0')}-${today.getDate().toString().padStart(2, '0')}`;
      saveAsExcel(excelBuffer, `ATM_Detection_${dateStr}.xlsx`);
    }

    // Helper function to save as Excel
    function saveAsExcel(buffer, fileName) {
      const data = new Blob([buffer], { type: 'application/octet-stream' });
      saveAs(data, fileName);
    }

    function toggleDropdown() {
  const dropdown = document.getElementById("dropdownMenu");
  dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
}

window.onclick = function(event) {
  if (!event.target.matches('.dropdown-toggle')) {
    const dropdowns = document.getElementsByClassName("dropdown-menu");
    for (let i = 0; i < dropdowns.length; i++) {
      dropdowns[i].style.display = "none";
    }
  }
}

// Dummy export functions
function exportToExcel() {
  alert("Exporting to Excel...");
  // implement your Excel export logic here
}

function exportToPDF() {
  alert("Exporting to PDF...");
  // implement your PDF export logic here
}

function exportToCSV() {
  alert("Exporting to CSV...");
  // implement your CSV export logic here
}

function getSelectedATMs() {
  const selected = [];
  document.querySelectorAll('.row-checkbox:checked').forEach(cb => {
    selected.push(cb.getAttribute('data-atm'));
  });
  return selected;
}

  </script>
    
</body>
</html>